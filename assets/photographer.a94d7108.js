import{a as l,g as O,p as w}from"./api.e845fd50.js";let s;s=null;const I='img, button,  input,  textarea, [tabindex]:not([tabindex="-1"])';let h=[],x=null;const D=e=>{e.key==="Escape"&&f()},S=e=>{e.preventDefault();let t=h.findIndex(n=>n===s.querySelector(":focus"));e.shiftKey===!0?t-=1:t+=1,t>=h.length&&(t=0),t<0&&(t=h.length-1),h[t].focus()};function f(){!s||(x!==null&&x.focus(),s.style.display="none",s.setAttribute("aria-hidden","true"),s.setAttribute("aria-modal","false"),s.removeEventListener("click",f),s.querySelector(".modal_close").removeEventListener("click",f),s.querySelector(".modal").removeEventListener("click",e=>e.stopPropagation()),s.removeEventListener("keydown",S),s.removeEventListener("keydown",D),s=null)}function T(){s=document.getElementById("contact_modal"),h=Array.from(s.querySelectorAll(I)),x=document.querySelector(":focus"),s.style.display="block",h[0].focus(),s.removeAttribute("aria-hidden"),s.setAttribute("aria-modal","true"),s.addEventListener("click",f),s.querySelector(".modal_close").addEventListener("click",f),s.querySelector(".modal").addEventListener("click",e=>e.stopPropagation()),s.addEventListener("keydown",S),s.addEventListener("keydown",D)}function P(e){const{id:t,photographerId:n,title:o,image:r,video:i,likes:d}=e,c=`assets/images/${n}/${r}`,m=`assets/images/${n}/${i}`,p=document.querySelector(".photographer_media");function b(){const g=l(p,"article","",{class:"product"});function M(){const v=l(g,"a","",{href:m}),A=l(v,"video","",{class:"product-video",controls:!0,preload:"metadata"});l(A,"source","",{src:`${m}#t=0.1`,type:"video/mp4"})}function a(){const v=l(g,"a","",{href:c});l(v,"img","",{class:"product-img",src:c,alt:o,id:t})}i?M():a();const u=l(g,"footer","",{class:"product-footer"});return u.innerHTML=`
        <p class="product-title">${o}</p>
        <span class="product-likes">${d}</span>
        <svg width="19" height="19" viewBox="0 0 19 19" class="product-heart" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z" fill="currentcolor"/>
        </svg>
        `,g}return{getUserMediaDOM:b}}function H(e){return e.sort(({title:t},{title:n})=>t.localeCompare(n))}function $(e){return e.sort(({date:t},{date:n})=>new Date(t)-new Date(n))}function F(e){return e.sort(({likes:t},{likes:n})=>n-t)}function U(e){function t(o){const r=o.replace(/^.*[\\/]|\.[^.]+$/g,"").replace(/_/g," "),i=document.querySelector(".lightbox_container");if(o.split(".")[1]==="mp4")i.innerHTML="",l(i,"video","",{class:"lightbox_video",controls:!0,src:o});else{i.innerHTML="",l(i,"div","",{class:"lightbox_loader"});const c=document.createElement("img");c.setAttribute("src",o),c.setAttribute("alt",r),c.setAttribute("class","lightbox_image"),c.onload=()=>{i.innerHTML="",i.appendChild(c)}}}function n(){const o=l(document.body,"div","",{class:"lightbox",role:"dialog","aria-hidden":"true","aria-modal":"false","aria-labelledby":"contact_modal_title",style:"display: block"});l(o,"button","",{class:"lightbox_close"}),l(o,"button","",{class:"lightbox_prev"}),l(o,"button","",{class:"lightbox_next"}),l(o,"div","",{id:"lightbox_container",class:"lightbox_container"});function r(a,u){a.preventDefault(),u.focus(),o.remove(),document.removeEventListener("click",r),document.removeEventListener("keydown",m)}function i(a){a.preventDefault();const u=document.querySelector("#lightbox_container").firstElementChild;return e.findIndex(v=>v===u.getAttribute("src"))}function d(a){let u=i(a);u===0&&(u=e.length),t(e[u-1])}function c(a){let u=i(a);u===e.length-1&&(u=-1),t(e[u+1])}function m(a){switch(a.key){case"Escape":r(a);break;case"ArrowLeft":d(a);break;case"ArrowRight":c(a);break}}document.addEventListener("keydown",m);const p=o.querySelector(".lightbox_close"),b=document.activeElement;return p.addEventListener("click",a=>{r(a,b)}),o.querySelector(".lightbox_prev").addEventListener("click",d),o.querySelector(".lightbox_next").addEventListener("click",c),o}return{getLightboxDOM:n,getImageDOM:t}}function B(){function e(){const n=document.querySelector("#main"),o=l(n,"div","",{class:"dropdown"});return o.innerHTML=`
            <label id="combo1-label" class="combo-label">Trier par </label>
            <div class="combo js-select">
              <div aria-controls="listbox1"
                   aria-haspopup="listbox"
                   aria-labelledby="combo1-label"
                   id="combo1"
                   class="combo-input"
                   role="button"
                   tabindex="0">Popularit\xE9
              </div>
              <div class="combo-menu"
                   role="listbox"
                   id="listbox1"
                   >
                   <div role="option" class="combo-option option-current" aria-selected="true" aria-label="Popularit\xE9">Popularit\xE9</div>
                   <div role="option" class="combo-option" aria-selected="false" aria-label="Date" >Date</div>
                   <div role="option" class="combo-option" aria-selected="false" aria-label="Titre" >Titre</div>
              </div>
            </div>
        `,o}function t(){document.querySelector(".js-select").classList.toggle("open"),document.querySelector(".combo-input").toggleAttribute("aria-expanded"),document.querySelectorAll(".combo-option").forEach(o=>{o.toggleAttribute("aria-activedescendant")})}return{getDropdownDOM:e,openDropdown:t}}function V(e,t){function n(){const o=document.createElement("div");return o.classList.add("likes"),o.setAttribute("role","list"),o.setAttribute("aria-label","liste des likes"),o.innerHTML=`
        <div class="likes_fixed">
                <span class="likes_count" role="listitem">${e.toLocaleString("fr")}</span>  
                <svg width="19" height="19" viewBox="0 0 19 19" class="likes_heart" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.5 18.35L8.23125 17.03C3.725 12.36 0.75 9.28 0.75 5.5C0.75 2.42 2.8675 0 5.5625 0C7.085 0 8.54625 0.81 9.5 2.09C10.4537 0.81 11.915 0 13.4375 0C16.1325 0 18.25 2.42 18.25 5.5C18.25 9.28 15.275 12.36 10.7688 17.04L9.5 18.35Z" fill="currentcolor"/>
                </svg>
                <span class="likes_price" role="listitem" aria-label="${t}\u20AC / jour">${t}\u20AC / jour</span>
        </div>
            `,o}return{getLikesDOM:n}}function j(e,t){e.textContent=t.toLocaleString("fr")}function L(e){j(e,parseInt(e.textContent,10)+1)}const y=document.querySelector("main"),_=()=>{const t=new URL(window.location.href).searchParams.get("id");return parseInt(t,10)},C=e=>{const t=_();return e.find(n=>n.id===t)};async function k(e){const t=document.createElement("div");t.className="photographer_media",y.appendChild(t),e.forEach(n=>{const r=P(n).getUserMediaDOM();t.appendChild(r)})}async function K(e){const n=w(e).getUserHeaderDOM();y.appendChild(n)}function R(e){const n=w(e).getUserModalDOM();document.body.appendChild(n),document.querySelector(".modal_submit").addEventListener("click",o=>{o.preventDefault(),f()})}function Z(){const e=Array.from(document.querySelectorAll(".product a")),t=o=>{const r=Array.from(o.querySelectorAll("button:not([disabled])")),i=r[0],d=r[r.length-1];o.addEventListener("keydown",c=>{(c.key==="Tab"||c.code==="9")&&(c.shiftKey?document.activeElement===i&&(d.focus(),c.preventDefault()):document.activeElement===d&&(i.focus(),c.preventDefault()))})},n=Array.from(new Set(e.map(o=>o.getAttribute("href"))));e.forEach(o=>o.addEventListener("click",r=>{r.preventDefault();const i=U(n),d=i.getLightboxDOM();i.getImageDOM(r.currentTarget.getAttribute("href")),document.body.appendChild(d),document.querySelector(".lightbox_close").focus(),t(d)}))}function E(e){switch(document.querySelector(".option-current").textContent){case"Popularit\xE9":return F(e);case"Titre":return H(e);case"Date":return $(e);default:return e}}const q=e=>{const t=_();return e.filter(n=>n.photographerId===t)};function N(e){const{photographers:t,media:n}=e,{id:o}=C(t);let r=0;q(n).forEach(p=>{r+=p.likes});const{price:i}=t.find(p=>p.id===o),c=V(r,i).getLikesDOM();y.appendChild(c);const m=document.querySelector(".likes_count");document.querySelectorAll(".product-heart").forEach(p=>{p.addEventListener("click",b=>{b.preventDefault(),L(p.previousElementSibling),L(m)},{once:!0})})}function z(e){const t=e.textContent;e.value===t?e.classList.add("dropdown-menu_selected-option-hidden"):e.classList.remove("dropdown-menu_selected-option-hidden")}async function G(e){const t=B(),n=t.getDropdownDOM();y.appendChild(n);const o=document.querySelectorAll(".combo-option");await k(E(e)),document.querySelector("#combo1").addEventListener("click",t.openDropdown),o.forEach(r=>{r.addEventListener("click",()=>{o.forEach(c=>{c.classList.remove("option-current"),c.removeAttribute("aria-selected")}),z(r);const i=document.querySelector(".combo-input");i.textContent=r.textContent,i.setAttribute("aria-selected","true"),i.setAttribute("aria-label",r.textContent),r.classList.add("option-current"),r.setAttribute("aria-selected","true"),document.querySelector(".photographer_media").remove();const d=E(e);k(d)})})}(async()=>{const{photographers:e,media:t}=await O(),n=C(e);await K(n),await R(n),await G(q(t)),Z(),N({photographers:e,media:t}),document.querySelector(".photographer_contact").addEventListener("click",T)})();
