import{a,g as x,p as M}from"./api.e44699ab.js";let r;r=null;const S='img, button,  input,  textarea, [tabindex]:not([tabindex="-1"])';let u=[],b=null;const E=e=>{e.key==="Escape"&&m()},L=e=>{e.preventDefault();let t=u.findIndex(o=>o===r.querySelector(":focus"));e.shiftKey===!0?t-=1:t+=1,t>=u.length&&(t=0),t<0&&(t=u.length-1),u[t].focus()};function m(){!r||(b!==null&&b.focus(),r.style.display="none",r.setAttribute("aria-hidden","true"),r.setAttribute("aria-modal","false"),r.removeEventListener("click",m),r.querySelector(".modal_close").removeEventListener("click",m),r.querySelector(".modal").removeEventListener("click",e=>e.stopPropagation()),r.removeEventListener("keydown",L),r.removeEventListener("keydown",E),r=null)}function w(){r=document.getElementById("contact_modal"),u=Array.from(r.querySelectorAll(S)),b=document.querySelector(":focus"),r.style.display="block",u[0].focus(),r.removeAttribute("aria-hidden"),r.setAttribute("aria-modal","true"),r.addEventListener("click",m),r.querySelector(".modal_close").addEventListener("click",m),r.querySelector(".modal").addEventListener("click",e=>e.stopPropagation()),r.addEventListener("keydown",L),r.addEventListener("keydown",E)}function q(e){const{id:t,photographerId:o,title:n,image:l,video:i,likes:p}=e,d="assets/icons/heart.svg",h=`assets/images/${o}/${l}`,f=`assets/images/${o}/${i}`,y=document.querySelector(".photographer_media");function v(){const c=a(y,"article","",{class:"product"});if(i){const g=a(c,"a","",{href:f});a(g,"video","",{class:"product-video",controls:!0,src:f})}else{const g=a(c,"a","",{href:h});a(g,"img","",{class:"product-img",src:h,alt:n,id:t})}const s=a(c,"footer","",{class:"product-footer"});return a(s,"p",n,{class:"product-title"}),a(s,"span",p,{class:"product-likes"}),a(s,"img","",{class:"product-heart",alt:"likes",role:"img",src:d}),c}return{getUserMediaDOM:v}}function A(e){function t(n){console.log(n);const l=n.split("/").pop().split(".")[0].split("_").join(" "),i=document.querySelector(".lightbox_container");if(n.split(".")[1]==="mp4")i.innerHTML="",a(i,"video","",{class:"lightbox_video",controls:!0,src:n});else{i.innerHTML="",a(i,"div","",{class:"lightbox_loader"});const d=document.createElement("img");d.setAttribute("src",n),d.setAttribute("alt",l),d.setAttribute("class","lightbox_image"),d.onload=function(){i.innerHTML="",i.appendChild(d)}}}function o(){const n=a(document.body,"div","",{class:"lightbox",role:"dialog","aria-hidden":"true","aria-modal":"false","aria-labelledby":"contact_modal_title",style:"display: block"});a(n,"button","",{class:"lightbox_close"}),a(n,"button","",{class:"lightbox_prev"}),a(n,"button","",{class:"lightbox_next"}),a(n,"div","",{id:"lightbox_container",class:"lightbox_container"});function l(c){c.preventDefault(),n.remove(),document.removeEventListener("click",l),document.removeEventListener("keydown",h)}function i(c){c.preventDefault();const s=document.querySelector("#lightbox_container").firstElementChild;return e.findIndex(g=>g===s.getAttribute("src"))}function p(c){let s=i(c);s===0&&(s=e.length),t(e[s-1])}function d(c){let s=i(c);s===e.length-1&&(s=-1),t(e[s+1])}function h(c){switch(c.key){case"Escape":l(c);break;case"ArrowLeft":p(c);break;case"ArrowRight":d(c);break}}return document.addEventListener("keydown",h),n.querySelector(".lightbox_close").addEventListener("click",l),n.querySelector(".lightbox_prev").addEventListener("click",p),n.querySelector(".lightbox_next").addEventListener("click",d),n}return{getLightboxDOM:o,getImageDOM:t}}const k=document.querySelector("main"),_=()=>{const t=new URL(window.location.href).searchParams.get("id");return parseInt(t,10)},D=e=>{const t=_();return e.find(o=>o.id===t)},I=e=>{const t=_();return e.filter(o=>o.photographerId===t)};async function O(e){const t=a(k,"section","",{class:"photographer_media"});e.forEach(o=>{const l=q(o).getUserMediaDOM();t.appendChild(l)})}async function H(e){const o=M(e).getUserHeaderDOM();k.appendChild(o)}function C(e){const o=M(e).getUserModalDOM();document.body.appendChild(o)}function P(){const e=Array.from(document.querySelectorAll(".product a")),t=[...new Set(e.map(o=>o.getAttribute("href")))];e.forEach(o=>o.addEventListener("click",n=>{n.preventDefault();const l=A(t),i=l.getLightboxDOM();l.getImageDOM(n.currentTarget.getAttribute("href")),document.body.appendChild(i)}))}(async()=>{const{photographers:e}=await x(),{media:t}=await x(),o=D(e);await H(o),await C(o),await O(I(t)),P(),document.querySelector(".photographer_contact").addEventListener("click",w)})();
