import{a as n,g as v,p as _}from"./api.8504920c.js";let i;i=null;const S='img, button,  input,  textarea, [tabindex]:not([tabindex="-1"])';let p=[],y=null;const E=e=>{e.key==="Escape"&&g()},k=e=>{e.preventDefault();let t=p.findIndex(o=>o===i.querySelector(":focus"));e.shiftKey===!0?t-=1:t+=1,t>=p.length&&(t=0),t<0&&(t=p.length-1),p[t].focus()};function g(){!i||(y!==null&&y.focus(),i.style.display="none",i.setAttribute("aria-hidden","true"),i.setAttribute("aria-modal","false"),i.removeEventListener("click",g),i.querySelector(".modal_close").removeEventListener("click",g),i.querySelector(".modal").removeEventListener("click",e=>e.stopPropagation()),i.removeEventListener("keydown",k),i.removeEventListener("keydown",E),i=null)}function q(){i=document.getElementById("contact_modal"),p=Array.from(i.querySelectorAll(S)),y=document.querySelector(":focus"),i.style.display="block",p[0].focus(),i.removeAttribute("aria-hidden"),i.setAttribute("aria-modal","true"),i.addEventListener("click",g),i.querySelector(".modal_close").addEventListener("click",g),i.querySelector(".modal").addEventListener("click",e=>e.stopPropagation()),i.addEventListener("keydown",k),i.addEventListener("keydown",E)}function A(e){const{id:t,photographerId:o,title:r,image:s,video:c,likes:u}=e,a="assets/icons/heart.svg",h=`assets/images/${o}/${s}`,f=`assets/images/${o}/${c}`,b=document.querySelector(".photographer_media-user");function M(){const l=n(b,"article","",{class:"product"});if(c){const m=n(l,"a","",{href:f});n(m,"video","",{class:"product-video",controls:!0,src:f})}else{const m=n(l,"a","",{href:h});n(m,"img","",{class:"product-img",src:h,alt:r,id:t})}const d=n(l,"footer","",{class:"product-footer"});return n(d,"p",r,{class:"product-title"}),n(d,"span",u,{class:"product-likes"}),n(d,"img","",{class:"product-heart",alt:"likes",role:"img",src:a}),l}return{getUserMediaDOM:M}}function O(e){return e.sort((t,o)=>t.title.localeCompare(o.title))}function C(e){return e.sort((t,o)=>new Date(t.date)-new Date(o.date))}function I(e){return e.sort((t,o)=>o.likes-t.likes)}function P(e){function t(r){const s=r.replace(/^.*[\\/]/,"").replace(/\.[^.]+$/,"").replaceAll(/_/g," ");console.log("replace",s);const c=document.querySelector(".lightbox_container");if(r.split(".")[1]==="mp4")c.innerHTML="",n(c,"video","",{class:"lightbox_video",controls:!0,src:r});else{c.innerHTML="",n(c,"div","",{class:"lightbox_loader"});const a=document.createElement("img");a.setAttribute("src",r),a.setAttribute("alt",s),a.setAttribute("class","lightbox_image"),a.onload=()=>{c.innerHTML="",c.appendChild(a)}}}function o(){const r=n(document.body,"div","",{class:"lightbox",role:"dialog","aria-hidden":"true","aria-modal":"false","aria-labelledby":"contact_modal_title",style:"display: block"});n(r,"button","",{class:"lightbox_close"}),n(r,"button","",{class:"lightbox_prev"}),n(r,"button","",{class:"lightbox_next"}),n(r,"div","",{id:"lightbox_container",class:"lightbox_container"});function s(l){l.preventDefault(),r.remove(),document.removeEventListener("click",s),document.removeEventListener("keydown",h)}function c(l){l.preventDefault();const d=document.querySelector("#lightbox_container").firstElementChild;return e.findIndex(m=>m===d.getAttribute("src"))}function u(l){let d=c(l);d===0&&(d=e.length),t(e[d-1])}function a(l){let d=c(l);d===e.length-1&&(d=-1),t(e[d+1])}function h(l){switch(l.key){case"Escape":s(l);break;case"ArrowLeft":u(l);break;case"ArrowRight":a(l);break}}return document.addEventListener("keydown",h),r.querySelector(".lightbox_close").addEventListener("click",s),r.querySelector(".lightbox_prev").addEventListener("click",u),r.querySelector(".lightbox_next").addEventListener("click",a),r}return{getLightboxDOM:o,getImageDOM:t}}function H(){function e(){const t=document.querySelector("#main"),o=n(t,"section","",{class:"photographer_media"}),r=n(o,"div","",{class:"dropdown-menu"});n(o,"div","",{class:"photographer_media-user"}),n(r,"input","",{class:"dropdown-menu_switch",type:"checkbox",id:"filter-switch",name:"filter-switch",hidden:!0});const s=n(r,"label","",{class:"dropdown-menu_options-filter",for:"filter-switch"}),c=n(s,"ul","",{class:"dropdown-menu_filter",role:"listbox",tabindex:"-1"});n(c,"li","Popularit\xE9",{class:"dropdown-menu_filter-selected",role:"option","aria-selected":"true"});const u=n(c,"li","",{}),a=n(u,"ul","",{class:"dropdown-menu_select"});return n(a,"li","Popularit\xE9",{class:"dropdown-menu_select-option",role:"option"}),n(a,"li","Date",{class:"dropdown-menu_select-option",role:"option"}),n(a,"li","Titre",{class:"dropdown-menu_select-option",role:"option"}),o}return{getDropdownMenuDOM:e}}const L=document.querySelector("main"),D=()=>{const t=new URL(window.location.href).searchParams.get("id");return parseInt(t,10)},U=e=>{const t=D();return e.find(o=>o.id===t)};async function w(e){const t=document.querySelector(".photographer_media-user");e.forEach(o=>{const s=A(o).getUserMediaDOM();t.appendChild(s)})}async function F(e){const o=_(e).getUserHeaderDOM();L.appendChild(o)}function T(e){const o=_(e).getUserModalDOM();document.body.appendChild(o)}function B(){const e=Array.from(document.querySelectorAll(".product a")),t=[...new Set(e.map(o=>o.getAttribute("href")))];e.forEach(o=>o.addEventListener("click",r=>{r.preventDefault();const s=P(t),c=s.getLightboxDOM();s.getImageDOM(r.currentTarget.getAttribute("href")),document.body.appendChild(c)}))}function x(e){switch(document.querySelector(".dropdown-menu_filter-selected").textContent){case"Popularit\xE9":return I(e);case"Titre":return O(e);case"Date":return C(e)}}const $=e=>{const t=D();return e.filter(o=>o.photographerId===t)};async function V(e){const o=H().getDropdownMenuDOM();L.appendChild(o);const r=document.querySelector(".dropdown-menu_filter-selected");document.querySelectorAll(".dropdown-menu_select-option").forEach(c=>{c.addEventListener("click",()=>{r.textContent=c.textContent})}),await w(x(e)),document.querySelectorAll(".dropdown-menu_select-option").forEach(c=>{c.addEventListener("click",()=>{const u=document.querySelector(".photographer_media-user");for(;u.firstChild;)u.removeChild(u.firstChild);const a=x(e);w(a)})})}(async()=>{const{photographers:e}=await v(),{media:t}=await v(),o=U(e);await F(o),await T(o),await V($(t)),B(),document.querySelector(".photographer_contact").addEventListener("click",q)})();
