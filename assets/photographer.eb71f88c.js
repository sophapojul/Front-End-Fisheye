import{a as r,g as v,p as x}from"./api.aa81a06d.js";let c;c=null;const S='img, button,  input,  textarea, [tabindex]:not([tabindex="-1"])';let h=[],y=null;const _=e=>{e.key==="Escape"&&g()},E=e=>{e.preventDefault();let t=h.findIndex(o=>o===c.querySelector(":focus"));e.shiftKey===!0?t-=1:t+=1,t>=h.length&&(t=0),t<0&&(t=h.length-1),h[t].focus()};function g(){!c||(y!==null&&y.focus(),c.style.display="none",c.setAttribute("aria-hidden","true"),c.setAttribute("aria-modal","false"),c.removeEventListener("click",g),c.querySelector(".modal_close").removeEventListener("click",g),c.querySelector(".modal").removeEventListener("click",e=>e.stopPropagation()),c.removeEventListener("keydown",E),c.removeEventListener("keydown",_),c=null)}function q(){c=document.getElementById("contact_modal"),h=Array.from(c.querySelectorAll(S)),y=document.querySelector(":focus"),c.style.display="block",h[0].focus(),c.removeAttribute("aria-hidden"),c.setAttribute("aria-modal","true"),c.addEventListener("click",g),c.querySelector(".modal_close").addEventListener("click",g),c.querySelector(".modal").addEventListener("click",e=>e.stopPropagation()),c.addEventListener("keydown",E),c.addEventListener("keydown",_)}function A(e){const{id:t,photographerId:o,title:n,image:l,video:i,likes:u}=e,a="assets/icons/heart.svg",p=`assets/images/${o}/${l}`,f=`assets/images/${o}/${i}`,b=document.querySelector(".photographer_media");function M(){const s=r(b,"article","",{class:"product"});if(i){const m=r(s,"a","",{href:f});r(m,"video","",{class:"product-video",controls:!0,src:f})}else{const m=r(s,"a","",{href:p});r(m,"img","",{class:"product-img",src:p,alt:n,id:t})}const d=r(s,"footer","",{class:"product-footer"});return r(d,"p",n,{class:"product-title"}),r(d,"span",u,{class:"product-likes"}),r(d,"img","",{class:"product-heart",alt:"likes",role:"img",src:a}),s}return{getUserMediaDOM:M}}function O(e){return e.sort((t,o)=>t.title.localeCompare(o.title))}function I(e){return e.sort((t,o)=>new Date(t.date)-new Date(o.date))}function C(e){return e.sort((t,o)=>t.likes-o.likes),e.sort((t,o)=>t.likes-o.likes)}function P(e){function t(n){console.log(n);const l=n.split("/").pop().split(".")[0].split("_").join(" "),i=document.querySelector(".lightbox_container");if(n.split(".")[1]==="mp4")i.innerHTML="",r(i,"video","",{class:"lightbox_video",controls:!0,src:n});else{i.innerHTML="",r(i,"div","",{class:"lightbox_loader"});const a=document.createElement("img");a.setAttribute("src",n),a.setAttribute("alt",l),a.setAttribute("class","lightbox_image"),a.onload=function(){i.innerHTML="",i.appendChild(a)}}}function o(){const n=r(document.body,"div","",{class:"lightbox",role:"dialog","aria-hidden":"true","aria-modal":"false","aria-labelledby":"contact_modal_title",style:"display: block"});r(n,"button","",{class:"lightbox_close"}),r(n,"button","",{class:"lightbox_prev"}),r(n,"button","",{class:"lightbox_next"}),r(n,"div","",{id:"lightbox_container",class:"lightbox_container"});function l(s){s.preventDefault(),n.remove(),document.removeEventListener("click",l),document.removeEventListener("keydown",p)}function i(s){s.preventDefault();const d=document.querySelector("#lightbox_container").firstElementChild;return e.findIndex(m=>m===d.getAttribute("src"))}function u(s){let d=i(s);d===0&&(d=e.length),t(e[d-1])}function a(s){let d=i(s);d===e.length-1&&(d=-1),t(e[d+1])}function p(s){switch(s.key){case"Escape":l(s);break;case"ArrowLeft":u(s);break;case"ArrowRight":a(s);break}}return document.addEventListener("keydown",p),n.querySelector(".lightbox_close").addEventListener("click",l),n.querySelector(".lightbox_prev").addEventListener("click",u),n.querySelector(".lightbox_next").addEventListener("click",a),n}return{getLightboxDOM:o,getImageDOM:t}}function H(){function e(){const t=document.createElement("div");t.classList.add("dropdown-menu"),r(t,"input","",{class:"dropdown-menu_switch",type:"checkbox",id:"filter-switch",name:"filter-switch",hidden:!0});const o=r(t,"label","",{class:"dropdown-menu_options-filter",for:"filter-switch"}),n=r(o,"ul","",{class:"dropdown-menu_filter",role:"listbox",tabindex:"-1"});r(n,"li","Popularit\xE9",{class:"dropdown-menu_filter-selected",role:"option","aria-selected":"true"});const l=r(n,"li","",{}),i=r(l,"ul","",{class:"dropdown-menu_select"});return r(i,"li","Popularit\xE9",{class:"dropdown-menu_select-option",role:"option"}),r(i,"li","Date",{class:"dropdown-menu_select-option",role:"option"}),r(i,"li","Titre",{class:"dropdown-menu_select-option",role:"option"}),t}return{getDropdownMenuDOM:e}}const k=document.querySelector("main"),L=()=>{const t=new URL(window.location.href).searchParams.get("id");return parseInt(t,10)},B=e=>{const t=L();return e.find(o=>o.id===t)},w=e=>{const t=L();return e.filter(o=>o.photographerId===t)};async function D(e){const t=r(k,"section","",{class:"photographer_media"});e.forEach(o=>{const l=A(o).getUserMediaDOM();t.appendChild(l)})}async function F(e){const o=x(e).getUserHeaderDOM();k.appendChild(o)}function T(e){const o=x(e).getUserModalDOM();document.body.appendChild(o)}function U(){const e=Array.from(document.querySelectorAll(".product a")),t=[...new Set(e.map(o=>o.getAttribute("href")))];e.forEach(o=>o.addEventListener("click",n=>{n.preventDefault();const l=P(t),i=l.getLightboxDOM();l.getImageDOM(n.currentTarget.getAttribute("href")),document.body.appendChild(i)}))}function $(e){switch(document.querySelector(".dropdown-menu_filter-selected").textContent){case"Popularit\xE9":return C(e);case"Titre":return O(e);case"Date":return I(e)}}async function V(e){const t=document.querySelector(".photographer_header"),n=H().getDropdownMenuDOM();t.parentNode.insertBefore(n,t.nextSibling);const l=document.querySelector(".dropdown-menu_filter-selected");document.querySelectorAll(".dropdown-menu_select-option").forEach(u=>{u.addEventListener("click",()=>{l.textContent=u.textContent})}),document.querySelectorAll(".dropdown-menu_select-option").forEach(u=>{u.addEventListener("click",()=>{const a=document.querySelector("section.photographer_media");a.parentNode.removeChild(a);const p=$(e);D(p)})})}(async()=>{const{photographers:e}=await v(),{media:t}=await v(),o=B(e);await F(o),await T(o),await D(w(t)),await V(w(t)),U(),document.querySelector(".photographer_contact").addEventListener("click",q)})();
